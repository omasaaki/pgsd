# PGSD-005: スキーマ情報取得方法の調査レポート

## 調査概要
- **チケットID**: PGSD-005  
- **調査日**: 2025-07-12
- **調査者**: Claude
- **調査時間**: 約30分

## 調査結果

### スキーマ情報取得方法の比較

#### 1. pg_dump方式
- **メリット**: 完全な情報、標準ツール
- **デメリット**: テキスト解析が複雑、バージョン依存

#### 2. information_schema方式
- **メリット**: SQL標準、構造化データ、プログラム処理容易
- **デメリット**: PostgreSQL固有情報の不足

#### 3. pg_catalog方式
- **メリット**: 最も詳細な情報
- **デメリット**: バージョン依存が強い

#### 4. 既存ツール活用
- **メリット**: 実装済み
- **デメリット**: カスタマイズ困難

## 決定事項

### 採用方針: information_schema方式

**理由**:
1. 基本的なスキーマ構造の差分検出には十分
2. SQL標準で移植性が高い
3. 構造化されたデータで処理が容易
4. PostgreSQL固有機能は初期バージョンでは対象外

### 対応範囲

#### ✅ 対応する情報
- テーブル構造（テーブル名、カラム定義）
- 基本的な制約（PRIMARY KEY, FOREIGN KEY, UNIQUE, CHECK）
- ビュー定義
- 基本的な権限情報

#### ❌ 対応しない情報（将来拡張）
- PostgreSQL固有データ型の詳細（JSONB, ARRAY等）
- 特殊インデックス（GIN, GiST, BRIN等）
- パーティション情報
- 行レベルセキュリティ

## 次のアクション
1. information_schemaの詳細調査チケット作成
2. 各テーブルからの情報取得クエリ設計
3. 差分検出アルゴリズムの検討

## 関連チケット
- 後続: PGSD-008（information_schema調査）※新規作成予定

---

更新日: 2025-07-12