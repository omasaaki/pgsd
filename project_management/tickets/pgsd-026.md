# PGSD-026: メインエントリーポイント実装

## チケット情報
- **ID**: PGSD-026
- **タイトル**: メインエントリーポイント実装
- **トラッカー**: 機能
- **優先度**: High
- **ステータス**: TODO
- **担当者**: 未定
- **見積（時間）**: 2時間
- **実績（時間）**: -
- **依存チケット**: PGSD-025（CLI実装）
- **ブロックチケット**: PGSD-028（統合テスト実装）

## 概要
`python -m pgsd`および`pgsd`コマンドとして実行可能なメインエントリーポイントを実装し、アプリケーション全体の統合を完成させる。

## 背景・理由
- ユーザーがアプリケーションを実行するための入り口
- パッケージインストール後の実行環境整備
- エラーハンドリングと適切な終了処理
- 本格的な運用環境での利用準備

## 詳細要件
### エントリーポイント実装
1. **__main__.py**
```python
# src/pgsd/__main__.py
from .main import main

if __name__ == "__main__":
    main()
```

2. **main.py更新**
```python
# src/pgsd/main.py
def main():
    # CLI統合とアプリケーション実行
    pass

if __name__ == "__main__":
    main()
```

3. **setup.py/pyproject.toml**
```toml
[project.scripts]
pgsd = "pgsd.main:main"
```

### 実装機能
1. **アプリケーション統合**
   - 全モジュールの統合確認
   - 初期化処理の実装
   - 設定読み込みの統合
   - ログ設定の初期化

2. **エラーハンドリング**
   - 未処理例外のキャッチ
   - 適切なエラーメッセージ表示
   - 終了コードの設定
   - デバッグ情報の出力制御

3. **実行モード対応**
   - 通常実行モード
   - デバッグモード
   - バージョン表示
   - ヘルプ表示

4. **リソース管理**
   - 適切なクリーンアップ
   - データベース接続の終了
   - 一時ファイルの削除
   - メモリリークの防止

## 実行方法
### 開発環境
```bash
# モジュールとして実行
python -m pgsd compare --help

# 直接実行
python src/pgsd/main.py compare --help
```

### インストール後
```bash
# コマンドとして実行
pgsd compare --help

# モジュールとして実行
python -m pgsd compare --help
```

## 受入条件
- [ ] `python -m pgsd`で実行できる
- [ ] インストール後`pgsd`コマンドで実行できる
- [ ] 全機能が統合されて動作する
- [ ] エラーハンドリングが適切である
- [ ] 終了コードが正しく設定される
- [ ] リソースが適切にクリーンアップされる

## テスト項目
### 統合テスト
- [ ] エントリーポイントからの実行テスト
- [ ] 各種実行モードのテスト
- [ ] エラーケースの動作確認
- [ ] クリーンアップ処理の確認

### インストールテスト
- [ ] パッケージインストール確認
- [ ] コマンド実行確認
- [ ] 依存関係の確認

### エンドツーエンドテスト
- [ ] 実際のスキーマ比較の実行
- [ ] レポート生成の確認
- [ ] 設定ファイル連携の確認

## 作業記録
- **開始日時**: 未定
- **完了日時**: 未定
- **実績時間**: 未定
- **見積との差異**: 未定
- **差異の理由**: 未定

---

作成日: 2025-07-15